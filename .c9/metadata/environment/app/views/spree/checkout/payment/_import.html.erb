{"filter":false,"title":"_import.html.erb","tooltip":"/app/views/spree/checkout/payment/_import.html.erb","undoManager":{"mark":3,"position":3,"stack":[[{"start":{"row":0,"column":0},"end":{"row":76,"column":7},"action":"insert","lines":[" <!DOCTYPE html>","<html>"," <!-- jQuery -->","  <script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-1.12.4.min.js\" ></script>","  <!-- iamport.payment.js -->","  <script type=\"text/javascript\" src=\"https://cdn.iamport.kr/js/iamport.payment-1.1.5.js\"></script>","  ","  ","  <script>","     ","         IMP.init(\"imp16525225\"); // \"imp00000000\" 대신 발급받은 \"가맹점 식별코드\"를 사용합니다.","              ","               // IMP.request_pay(param, callback) 호출","       IMP.request_pay({","    pg : 'html5_inicis',","    pay_method : 'card',","    merchant_uid : 'merchant_' + new Date().getTime(),","    name : '주문명:결제테스트',","    amount : ' <%= @order.display_total %>',","    buyer_email : '<%= @order.email %>',","    ","    buyer_name : '<%= @order.ship_address.firstname %><%= @order.ship_address.lastname %>',","    buyer_tel : '<%= @order.ship_address.phone %>',","    buyer_addr : '<%= sanitize @order.ship_address.to_s %>',","    buyer_postcode : '<%= @order.ship_address.zipcode %>'","}, function(rsp) {","    if ( rsp.success ) {","        // jQuery.ajax({","        //             url: \"/orders/complete\", //cross-domain error가 발생하지 않도록 주의해주세요","        //             type: 'POST',","        //             dataType: 'json',","            ","        var msg = '결제가 완료되었습니다.';","                    ","        <%= form_with model: @spree_Order do |form| %>","","            ","              <div class=\"field\">","                <%= form.label :title %>","                <%= form.text_field :title %>","              </div>","            ","              <div class=\"field\">","                <%= form.label :body %>","                <%= form.text_area :body %>","              </div>","","        <% end %>","        ","        // credit_card = ActiveMerchant::Billing::CreditCard.new(","        //         :first_name         => 'Bob',","        //         :last_name          => 'Bobsen',","        //         :number             => '4242424242424242',","        //         :month              => '8',","        //         :year               => Time.now.year+1,","        //         :verification_value => '000')","                    ","        ","        // msg += '고유ID : ' + rsp.imp_uid;","        // msg += '상점 거래ID : ' + rsp.merchant_uid;","        // msg += '결제 금액 : ' + rsp.paid_amount;","        // msg += '카드 승인번호 : ' + rsp.apply_num;","        ","        // redirect_to completion_route","        ","        //  msg += <#%= @order.approver_id %> + rsp.imp_uid;","        ","    } else {","        var msg = '결제에 실패하였습니다.';","        msg += '에러내용 : ' + rsp.error_msg;","    }","","    alert(msg);","});","","  </script>","</html>"],"id":1}],[{"start":{"row":76,"column":0},"end":{"row":76,"column":7},"action":"remove","lines":["</html>"],"id":4},{"start":{"row":75,"column":11},"end":{"row":76,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":6},"action":"remove","lines":[" <!DOCTYPE html>","<html>"],"id":5}],[{"start":{"row":0,"column":0},"end":{"row":74,"column":11},"action":"remove","lines":[""," <!-- jQuery -->","  <script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-1.12.4.min.js\" ></script>","  <!-- iamport.payment.js -->","  <script type=\"text/javascript\" src=\"https://cdn.iamport.kr/js/iamport.payment-1.1.5.js\"></script>","  ","  ","  <script>","     ","         IMP.init(\"imp16525225\"); // \"imp00000000\" 대신 발급받은 \"가맹점 식별코드\"를 사용합니다.","              ","               // IMP.request_pay(param, callback) 호출","       IMP.request_pay({","    pg : 'html5_inicis',","    pay_method : 'card',","    merchant_uid : 'merchant_' + new Date().getTime(),","    name : '주문명:결제테스트',","    amount : ' <%= @order.display_total %>',","    buyer_email : '<%= @order.email %>',","    ","    buyer_name : '<%= @order.ship_address.firstname %><%= @order.ship_address.lastname %>',","    buyer_tel : '<%= @order.ship_address.phone %>',","    buyer_addr : '<%= sanitize @order.ship_address.to_s %>',","    buyer_postcode : '<%= @order.ship_address.zipcode %>'","}, function(rsp) {","    if ( rsp.success ) {","        // jQuery.ajax({","        //             url: \"/orders/complete\", //cross-domain error가 발생하지 않도록 주의해주세요","        //             type: 'POST',","        //             dataType: 'json',","            ","        var msg = '결제가 완료되었습니다.';","                    ","        <%= form_with model: @spree_Order do |form| %>","","            ","              <div class=\"field\">","                <%= form.label :title %>","                <%= form.text_field :title %>","              </div>","            ","              <div class=\"field\">","                <%= form.label :body %>","                <%= form.text_area :body %>","              </div>","","        <% end %>","        ","        // credit_card = ActiveMerchant::Billing::CreditCard.new(","        //         :first_name         => 'Bob',","        //         :last_name          => 'Bobsen',","        //         :number             => '4242424242424242',","        //         :month              => '8',","        //         :year               => Time.now.year+1,","        //         :verification_value => '000')","                    ","        ","        // msg += '고유ID : ' + rsp.imp_uid;","        // msg += '상점 거래ID : ' + rsp.merchant_uid;","        // msg += '결제 금액 : ' + rsp.paid_amount;","        // msg += '카드 승인번호 : ' + rsp.apply_num;","        ","        // redirect_to completion_route","        ","        //  msg += <#%= @order.approver_id %> + rsp.imp_uid;","        ","    } else {","        var msg = '결제에 실패하였습니다.';","        msg += '에러내용 : ' + rsp.error_msg;","    }","","    alert(msg);","});","","  </script>"],"id":6},{"start":{"row":0,"column":0},"end":{"row":16,"column":2},"action":"insert","lines":["<div>","  계좌 : 국민은행 123-12345-123(박원기)","  <br>","  결제 신청 후 3일 이내에 입금해주세요!","</div>","","<br>","","  <%= form_with model: @order.payment_name do |form| %>","","       <div class=\"form_group\" >","         <%= form.text_field :payment_name, class: 'form-control', required: true, placeholder: \"입금자 명을 적어주세요\" %>","       </div>","      <%= form.submit \"저장\", class: 'btn btn-primary btn-block spree-btn mb-5' %>","  <% end %>","  ","  "]}]]},"ace":{"folds":[],"scrolltop":48,"scrollleft":0,"selection":{"start":{"row":16,"column":2},"end":{"row":16,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":157,"mode":"ace/mode/html_ruby"}},"timestamp":1587273036503,"hash":"c3ff4d63993c5125329d964fab2ed66e3e84d7de"}